<div class="container my-5">
  <h2 class="mb-4 text-center font-staatliches section-title1-primary">Services Management</h2>

  <%# Navegación del Dashboard unificada %>
  <div class="d-flex flex-wrap justify-content-center gap-2 mb-4">
    <%= link_to 'Orders', orders_path, class: 'btn btn-primary-custom font-staatliches' %>
    <%= link_to 'Products', products_path, class: 'btn btn-primary-custom font-staatliches' %>
    <%= link_to 'Bookings', bookings_list_path, class: 'btn btn-primary-custom font-staatliches' %>
    <%= link_to 'Messages', contacts_path, class: 'btn btn-primary-custom font-staatliches' %>
    <%= link_to 'Reviews', reviews_path, class: 'btn btn-primary-custom font-staatliches' %>
    <%= link_to 'Clients', clients_path, class: 'btn btn-primary-custom font-staatliches' %>
    <%= link_to 'Services', services_path, class: 'btn btn-primary-custom font-staatliches active' %>
    <%= link_to 'Stripe Dashboard', "https://dashboard.stripe.com/", class: 'btn btn-primary-custom font-staatliches', target: "_blank" %>
  </div>

  <% if notice.present? %>
    <div class="alert alert-success font-staatliches text-center shadow-sm"><%= notice %></div>
  <% end %>

  <% if @services.any? %>
    <div class="table-responsive shadow-sm rounded">
      <table class="table table-hover table-striped table-bordered align-middle mb-0">
        <thead class="table-dark font-staatliches text-center">
          <tr>
            <th scope="col" style="width: 50px;">#</th>
            <th scope="col" style="width: 100px;">Preview</th>
            <th scope="col">Service Name</th>
            <th scope="col" class="d-none d-md-table-cell">Description</th>
            <th scope="col" style="width: 200px;">Options</th>
          </tr>
        </thead>
        <tbody class="font-jaro">
          <% @services.each_with_index do |service, index| %>
            <tr>
              <th scope="row" class="text-center text-muted"><%= index + 1 %></th>
              
              <%# Vista previa de imagen del servicio %>
              <td class="text-center">
                <% if service.images.attached? %>
                  <%= image_tag service.images.first, class: "img-thumbnail", 
                                style: "width: 70px; height: 70px; object-fit: cover; border-radius: 8px;" %>
                <% else %>
                  <div class="bg-light d-flex align-items-center justify-content-center mx-auto" 
                       style="width: 70px; height: 70px; border: 1px dashed #ccc; border-radius: 8px;">
                    <i class="bi bi-gear-wide-connected text-muted"></i>
                  </div>
                <% end %>
              </td>

              <td class="fw-bold text-uppercase"><%= service.name %></td>

              <td class="d-none d-md-table-cell text-muted small">
                <%= truncate(service.description, length: 80) %>
              </td>

              <td class="text-center">
                <div class="d-flex justify-content-center gap-2">
                  <%# link_to "View", service, class: "btn btn-info btn-sm text-white px-3" %>
                  <%= link_to "Edit", edit_service_path(service), class: "btn btn-warning btn-sm px-3" %>
                  <%= link_to "Delete", service, data: { turbo_method: :delete, turbo_confirm: "¿Are you sure you want to delete the service: #{service.name}?" }, class: "btn btn-danger btn-sm" %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="alert alert-info text-center mt-4" role="alert">
      No services registered yet.
    </div>
  <% end %>

  <div class="text-center mt-5">
    <%= link_to new_service_path, class: "btn btn-success btn-lg font-staatliches px-5 shadow" do %>
      <i class="bi bi-plus-circle"></i> ADD NEW SERVICE
    <% end %>
  </div>
</div>